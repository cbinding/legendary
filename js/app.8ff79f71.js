(function(){"use strict";var e={6024:function(e,t,l){var o=l(9242),n=l(2578),a=l(3396);const s={class:"container"};function r(e,t,l,o,n,r){const i=(0,a.up)("LegendBuilder");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(i)])}l(2062);var i=l(7139),c=l(4870),d=l.p+"img/icon-legendary.a85d3c2d.svg";l(7658);const u=(0,n.Q_)("legend",{state:()=>({title:"",description:"",creator:"",contact:"",version:"",license:"",created:(new Date).toISOString(),updated:(new Date).toISOString(),items:[],nextID:0}),getters:{itemCount:e=>e.items.length,palette:e=>e.items.map((e=>e.colour)).filter((e=>e))},actions:{reset(){this.title="",this.description="",this.creator="",this.contact="",this.version="",this.license="",this.created=(new Date).toISOString(),this.updated=this.created,this.items=[],this.nextID=0},importJSON(e){const t=JSON.parse(e);this.importData(t)},importData(e){this.reset(),this.setTitle(e.title||""),this.setDescription(e.description||""),this.setCreator(e.creator||""),this.setContact(e.contact||""),this.setVersion(e.version||""),this.setLicense(e.license||""),(e.items||[]).forEach((e=>this.addItem(e)))},exportJSON(){return JSON.stringify(this.$state)},stampUpdated(){this.updated=(new Date).toISOString()},setTitle(e){const t=(e||"").trim();this.title!==t&&(this.title=t,this.stampUpdated())},setDescription(e){const t=(e||"").trim();this.description!==t&&(this.description=t,this.stampUpdated())},setCreator(e){const t=(e||"").trim();this.creator!==t&&(this.creator=t,this.stampUpdated())},setContact(e){const t=(e||"").trim();this.contact!==t&&(this.contact=t,this.stampUpdated())},setVersion(e){const t=(e||"").trim();this.version!==t&&(this.version=t,this.stampUpdated())},setLicense(e){const t=(e||"").trim();this.license!==t&&(this.license=t,this.stampUpdated())},newItem(){this.addItem({colour:"#dddddd",label:"new item"})},addItem(e){this.items.push({...e,id:this.nextID++}),this.stampUpdated()},getItem(e){const t=this.items.find((t=>t.id===e));return t||null},delItem(e){this.items=this.items.filter((t=>t.id!==e)),this.stampUpdated()},setItemColour(e,t){const l=this.getItem(e);l&&l.colour!==t&&(l.colour=t,this.stampUpdated())},setItemLabel(e,t){const l=this.getItem(e);l&&l.label!==t&&(l.label=t,this.stampUpdated())}}}),m=e=>((0,a.dD)("data-v-27d54888"),e=e(),(0,a.Cn)(),e),p={class:"legend-metadata"},v={class:"mb-2"},b=m((()=>(0,a._)("label",{for:"legend-title",class:"small"},"Title",-1))),h={class:"mb-2"},g=m((()=>(0,a._)("label",{for:"legend-description",class:"small"},"Description",-1))),f={class:"mb-2"},_=m((()=>(0,a._)("label",{for:"legend-creator",class:"small"},"Creator",-1))),y={class:"mb-2"},w=m((()=>(0,a._)("label",{for:"legend-contact",class:"small"},"Contact",-1))),C={class:"mb-2"},I=m((()=>(0,a._)("label",{for:"legend-version",class:"small"},"Version",-1))),U={class:"mb-2"},k=m((()=>(0,a._)("label",{for:"legend-license",class:"small"},"License",-1))),F={class:"mb-2"},x=m((()=>(0,a._)("label",{for:"legend-created",class:"small"},"Created",-1))),D={class:"mb-2"},L=m((()=>(0,a._)("label",{for:"legend-updated",class:"small"},"Updated",-1)));var S={__name:"LegendMetadata",setup(e){const t=u(),l=(0,a.Fl)({get(){return t.$state.title},set(e){t.setTitle(e)}}),n=(0,a.Fl)({get(){return t.$state.description},set(e){t.setDescription(e)}}),s=(0,a.Fl)({get(){return t.$state.creator},set(e){t.setCreator(e)}}),r=(0,a.Fl)({get(){return t.$state.contact},set(e){t.setContact(e)}}),i=(0,a.Fl)({get(){return t.$state.version},set(e){t.setVersion(e)}}),c=(0,a.Fl)({get(){return t.$state.license},set(e){t.setLicense(e)}}),d=(0,a.Fl)((()=>t.$state.created)),m=(0,a.Fl)((()=>t.$state.updated));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("form",null,[(0,a._)("div",v,[b,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),id:"legend-title",title:"legend title",placeholder:"enter a title for the legend",class:"form-control form-control-sm shadow-sm rounded hoverable"},null,512),[[o.nr,l.value]])]),(0,a._)("div",h,[g,(0,a.wy)((0,a._)("textarea",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),id:"legend-description",title:"legend description",placeholder:"enter a description for the legend",class:"form-control form-control-sm shadow-sm rounded hoverable"},"\n                ",512),[[o.nr,n.value]])]),(0,a._)("div",f,[_,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),id:"legend-creator",title:"legend creator",placeholder:"enter name of creator for the legend",class:"form-control form-control-sm shadow-sm rounded hoverable"},null,512),[[o.nr,s.value]])]),(0,a._)("div",y,[w,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),id:"legend-contact",title:"legend contact",placeholder:"enter contact details (e.g. email address) for the legend creator",class:"form-control form-control-sm shadow-sm rounded hoverable"},null,512),[[o.nr,r.value]])]),(0,a._)("div",C,[I,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),id:"legend-version",title:"legend version",placeholder:"enter version for the legend",class:"form-control form-control-sm shadow-sm rounded hoverable"},null,512),[[o.nr,i.value]])]),(0,a._)("div",U,[k,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>c.value=e),id:"legend-license",title:"legend license",placeholder:"enter license details (e.g. licence url) for the legend data",class:"form-control form-control-sm shadow-sm rounded hoverable"},null,512),[[o.nr,c.value]])]),(0,a._)("div",F,[x,(0,a.wy)((0,a._)("input",{id:"legend-created","aria-disabled":"true",class:"form-control form-control-sm shadow-sm rounded","onUpdate:modelValue":t[6]||(t[6]=e=>d.value=e),disabled:""},null,512),[[o.nr,d.value]])]),(0,a._)("div",D,[L,(0,a.wy)((0,a._)("input",{id:"legend-updated","aria-disabled":"true",class:"form-control form-control-sm shadow-sm rounded","onUpdate:modelValue":t[7]||(t[7]=e=>m.value=e),disabled:""},null,512),[[o.nr,m.value]])])])]))}},O=l(89);const V=(0,O.Z)(S,[["__scopeId","data-v-27d54888"]]);var j=V;const M=e=>((0,a.dD)("data-v-1e8d36b8"),e=e(),(0,a.Cn)(),e),$={class:"input-group input-group-sm flex-nowrap m-0 p-0 border"},B={class:"input-group-text p-0 border-0"},E=["title","alt"],N={class:"input-group-text p-0 border-0"},R=["title"],T=M((()=>(0,a._)("i",{class:"bi bi-x-circle"},null,-1))),A=[T];var Z={__name:"LegendItem",props:{colour:{type:String,required:!1,default:"#FFFFFF"},label:{type:String,required:!1,default:""}},emits:["changeColour","changeLabel","deleteItem"],setup(e,{emit:t}){const l=e,n=(0,a.Fl)({get(){return l.colour},set(e){t("changeColour",e)}}),s=(0,a.Fl)({get(){return l.label},set(e){t("changeLabel",e)}});return(t,l)=>((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("div",B,[(0,a.wy)((0,a._)("input",{type:"color",class:"legend-item-colour form-control form-control-sm form-control-color border-0 rounded-0","aria-label":"Colour",title:n.value,alt:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),onChange:l[1]||(l[1]=(...e)=>t.changeColour&&t.changeColour(...e))},null,40,E),[[o.nr,n.value]])]),(0,a.wy)((0,a._)("input",{type:"text",class:"legend-item-label form-control form-control-sm p-1 border-0",placeholder:"Enter label for the legend item","onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),onChange:l[3]||(l[3]=(...e)=>t.changeLabel&&t.changeLabel(...e))},null,544),[[o.nr,s.value]]),(0,a._)("div",N,[(0,a._)("button",{class:"btn btn-sm btn-outline-secondary border-0",title:`delete '${e.label}'`,alt:"delete item",onClick:l[4]||(l[4]=(0,o.iM)((e=>t.$emit("deleteItem")),["prevent"]))},A,8,R)])]))}};const H=(0,O.Z)(Z,[["__scopeId","data-v-1e8d36b8"]]);var J=H;const P=e=>((0,a.dD)("data-v-0f2cf8f1"),e=e(),(0,a.Cn)(),e),W=P((()=>(0,a._)("i",{class:"bi bi-plus-circle me-1"},null,-1))),z={id:"legend-items",class:"legend-items list-group"};var G={__name:"LegendItems",setup(e){const t=u(),l=(0,a.Fl)((()=>t.$state.items)),n=()=>t.newItem(),s=e=>{confirm(`delete "${e.label}" - are you sure?`)&&t.delItem(e.id)},r=(e,l)=>t.setItemColour(e,l),i=(e,l)=>t.setItemLabel(e,l);return(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{class:"btn btn-sm btn-outline-secondary mb-2",onClick:t[0]||(t[0]=(0,o.iM)((e=>n()),["prevent"])),title:"add item",alt:"add item",id:"add"},[W,(0,a.Uk)("Add Item")]),(0,a._)("ul",z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.value,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:"list-group-item1 p-0"},[(0,a.Wm)((0,c.SU)(J),{colour:e.colour,label:e.label,onChangeColour:t=>r(e.id,t),onChangeLabel:t=>i(e.id,t),onDeleteItem:t=>s(e)},null,8,["colour","label","onChangeColour","onChangeLabel","onDeleteItem"])])))),128))])]))}};const q=(0,O.Z)(G,[["__scopeId","data-v-0f2cf8f1"]]);var K=q;const Y=e=>((0,a.dD)("data-v-0c3562db"),e=e(),(0,a.Cn)(),e),Q={class:"palette-display"},X=["onClick","disabled"],ee=Y((()=>(0,a._)("i",{class:"bi bi-clipboard-plus me-1"},null,-1))),te=Y((()=>(0,a._)("span",null,"Copy to clipboard",-1))),le=[ee,te],oe={class:"palette"},ne=["alt","title"];var ae={__name:"PaletteDisplay",props:{colours:{type:Array,default(){return[]}}},setup(e){const t=e,l=async()=>await navigator.clipboard.writeText(t.colours.join()),n=e=>{var t="#"===e.charAt(0)?e.substring(1,7):e,l=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),n=parseInt(t.substring(4,6),16);return.299*l+.587*o+.114*n>186?"black":"white"};return(t,s)=>((0,a.wg)(),(0,a.iD)("div",Q,[(0,a._)("button",{type:"button",class:"btn btn-sm btn-outline-secondary align-middle m-2 shadow",title:"copy palette colour values to clipboard",onClick:(0,o.iM)(l,["stop"]),disabled:!e.colours.length},le,8,X),(0,a._)("div",oe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.colours,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,alt:e,title:e,class:"border-1 rounded-2 m-1 shadow-sm swatch",style:(0,i.j5)({color:n(e),"background-color":e})},[(0,a._)("i",null,(0,i.zw)(e),1)],12,ne)))),128))])]))}};const se=(0,O.Z)(ae,[["__scopeId","data-v-0c3562db"]]);var re=se;const ie=e=>((0,a.dD)("data-v-e4a60676"),e=e(),(0,a.Cn)(),e),ce={class:"card"},de=ie((()=>(0,a._)("div",{class:"card-header text-center fw-bold"},"Legendary",-1))),ue={class:"card-body p-2"},me={class:"form-check form-check-inline"},pe=ie((()=>(0,a._)("label",{class:"form-check-label",for:"importFromFile"},"Import from file",-1))),ve={class:"form-check form-check-inline"},be=ie((()=>(0,a._)("label",{class:"form-check-label",for:"importFromURL"},"Import from URL",-1))),he=["onClick"],ge=ie((()=>(0,a._)("i",{class:"bi bi-x-circle me-1"},null,-1))),fe=ie((()=>(0,a._)("span",null,"Clear All Data",-1))),_e=[ge,fe],ye={class:"input-group input-group-sm p-1"},we=ie((()=>(0,a._)("label",{for:"importFile",class:"input-group-text"},[(0,a._)("i",{class:"bi bi-filetype-json me-1"}),(0,a.Uk)("Import")],-1))),Ce=["onChange"],Ie={class:"input-group input-group-sm p-1"},Ue=ie((()=>(0,a._)("label",{for:"importURL",class:"input-group-text"},[(0,a._)("i",{class:"bi bi-filetype-json me-1"}),(0,a.Uk)("Import")],-1))),ke=["onClick"],Fe=ie((()=>(0,a._)("i",{class:"bi bi-check-circle me-1"},null,-1))),xe={class:"input-group input-group-sm p-1"},De=ie((()=>(0,a._)("label",{for:"exportfile",class:"input-group-text"},[(0,a._)("i",{class:"bi bi-filetype-json me-1"}),(0,a.Uk)("Export")],-1))),Le=["onClick"],Se=ie((()=>(0,a._)("input",{type:"text",class:"form-control form-control-sm",disabled:""},null,-1))),Oe={class:"nav nav-tabs"},Ve=ie((()=>(0,a._)("img",{src:d,width:"20%",height:"20%"},null,-1))),je={class:"badge text-bg-light ms-1 border rounded-pill"},Me={id:"Items",class:"tabcontent bg-light"},$e={id:"Metadata",class:"tabcontent bg-light"},Be={id:"Palette",class:"tabcontent bg-light"},Ee={class:"card-footer small"};var Ne={__name:"LegendBuilder",setup(e){const t=u(),l=(0,a.Fl)((()=>t.items.length)),n=(0,a.Fl)((()=>t.palette)),s=(0,c.iH)("fromFile"),r=(0,c.iH)(""),d=(0,c.iH)(""),m=(0,c.iH)("");(0,a.bv)((()=>{document.getElementById("defaultOpen").click()}));const p=()=>{confirm("This will clear all data, are you sure?")&&v()},v=()=>{document.getElementById("importFile").value="",s.value="fromFile",r.value="",d.value="",m.value="",t.reset()},b=e=>{m.value="",t.reset(),r.value=e.target.files[0];const l=new FileReader;l.onload=function(e){t.importJSON(e.target.result)},l.readAsText(r.value)},h=async()=>{m.value="",t.reset(),""!=d.value&&fetch(d.value,{headers:{accept:"application/json"}}).then((e=>e.json())).then((e=>t.importData(e))).catch((e=>m.value=e))},g=()=>(new Date).toISOString(),f=()=>g().replaceAll(/[:.\-Z]/g,""),_=()=>{const e=t.exportJSON(),l=r.value?.name||`legend-${f()}.json`;y(e,l),document.getElementById("importFile").value=""},y=(e,t)=>{let l=new Blob([e],{type:"text/plain;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(l,t);else{let e=document.createElement("a");if(void 0!==e.download){let o=URL.createObjectURL(l);e.setAttribute("href",o),e.setAttribute("download",t),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}},w=(e,t)=>{var l,o;l=document.getElementsByClassName("tabcontent");for(let n=0;n<l.length;n++)l[n].style.display="none";o=document.getElementsByClassName("nav-link");for(let n=0;n<o.length;n++)o[n].className=o[n].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",ce,[de,(0,a._)("div",ue,[(0,a._)("form",null,[(0,a._)("div",me,[(0,a.wy)((0,a._)("input",{class:"form-check-input",type:"radio",name:"importSource",id:"importFromFile",value:"fromFile","onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e)},null,512),[[o.G2,s.value]]),pe]),(0,a._)("div",ve,[(0,a.wy)((0,a._)("input",{class:"form-check-input",type:"radio",name:"importSource",id:"importFromURL",value:"fromURL","onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e)},null,512),[[o.G2,s.value]]),be]),(0,a._)("button",{type:"button",onClick:(0,o.iM)(p,["stop"]),class:"btn btn-sm btn-outline-secondary rounded shadow"},_e,8,he),(0,a.wy)((0,a._)("div",ye,[we,(0,a._)("input",{type:"file",id:"importFile",name:"importFile",accept:"application/json",class:"form-control form-control-sm",onChange:(0,o.iM)(b,["stop"])},null,40,Ce)],512),[[o.F8,"fromFile"==s.value]]),(0,a.wy)((0,a._)("div",Ie,[Ue,(0,a.wy)((0,a._)("input",{type:"text",id:"importURL",name:"importURL",class:"form-control form-control-sm","onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e)},null,512),[[o.nr,d.value]]),(0,a._)("button",{type:"button",onClick:(0,o.iM)(h,["stop"]),class:"btn btn-sm btn-outline-secondary rounded shadow float-right"},[Fe,(0,a.Uk)("Go")],8,ke)],512),[[o.F8,"fromURL"==s.value]]),(0,a._)("div",xe,[De,(0,a._)("button",{type:"button",id:"exportfile",name:"exportfile",class:"btn btn-sm btn-outline-secondary",onClick:(0,o.iM)(_,["stop"])},"Choose file",8,Le),Se])]),(0,a._)("div",Oe,[(0,a._)("a",{class:"nav-link",href:"#",onClick:t[3]||(t[3]=(0,o.iM)((e=>w(e,"Items")),["stop"])),id:"defaultOpen"},[Ve,(0,a.Uk)("Items"),(0,a._)("span",je,(0,i.zw)(l.value),1)]),(0,a._)("a",{class:"nav-link",href:"#",onClick:t[4]||(t[4]=(0,o.iM)((e=>w(e,"Metadata")),["stop"]))},"Metadata"),(0,a._)("a",{class:"nav-link",href:"#",onClick:t[5]||(t[5]=(0,o.iM)((e=>w(e,"Palette")),["stop"]))},"Palette")]),(0,a._)("div",Me,[(0,a.Wm)((0,c.SU)(K))]),(0,a._)("div",$e,[(0,a.Wm)((0,c.SU)(j))]),(0,a._)("div",Be,[(0,a.Wm)((0,c.SU)(re),{colours:n.value},null,8,["colours"])])]),(0,a._)("div",Ee,(0,i.zw)(m.value),1)]))}};const Re=(0,O.Z)(Ne,[["__scopeId","data-v-e4a60676"]]);var Te=Re,Ae={name:"App",components:{LegendBuilder:Te}};const Ze=(0,O.Z)(Ae,[["render",r]]);var He=Ze;const Je=(0,n.WB)(),Pe=(0,o.ri)(He);Pe.use(Je),Pe.mount("#app")}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,l),a.exports}l.m=e,function(){var e=[];l.O=function(t,o,n,a){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],a=e[d][2];for(var r=!0,i=0;i<o.length;i++)(!1&a||s>=a)&&Object.keys(l.O).every((function(e){return l.O[e](o[i])}))?o.splice(i--,1):(r=!1,a<s&&(s=a));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,n,a]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.p="/legendary/"}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,s=o[0],r=o[1],i=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in r)l.o(r,n)&&(l.m[n]=r[n]);if(i)var d=i(l)}for(t&&t(o);c<s.length;c++)a=s[c],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},o=self["webpackChunklegendary"]=self["webpackChunklegendary"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=l.O(void 0,[998],(function(){return l(6024)}));o=l.O(o)})();
//# sourceMappingURL=app.8ff79f71.js.map